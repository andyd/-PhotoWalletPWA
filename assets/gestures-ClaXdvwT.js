import{r as E,a as Zs,R as Qt}from"./vendor-nf7bT_Uh.js";var he=Et(),_=t=>At(t,he),de=Et();_.write=t=>At(t,de);var Ft=Et();_.onStart=t=>At(t,Ft);var pe=Et();_.onFrame=t=>At(t,pe);var me=Et();_.onFinish=t=>At(t,me);var tt=[];_.setTimeout=(t,e)=>{const s=_.now()+e,i=()=>{const r=tt.findIndex(o=>o.cancel==i);~r&&tt.splice(r,1),Q-=~r?1:0},n={time:s,handler:t,cancel:i};return tt.splice(us(s),0,n),Q+=1,cs(),n};var us=t=>~(~tt.findIndex(e=>e.time>t)||~tt.length);_.cancel=t=>{Ft.delete(t),pe.delete(t),me.delete(t),he.delete(t),de.delete(t)};_.sync=t=>{te=!0,_.batchedUpdates(t),te=!1};_.throttle=t=>{let e;function s(){try{t(...e)}finally{e=null}}function i(...n){e=n,_.onStart(s)}return i.handler=t,i.cancel=()=>{Ft.delete(s),e=null},i};var ge=typeof window<"u"?window.requestAnimationFrame:()=>{};_.use=t=>ge=t;_.now=typeof performance<"u"?()=>performance.now():Date.now;_.batchedUpdates=t=>t();_.catch=console.error;_.frameLoop="always";_.advance=()=>{_.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):fs()};var K=-1,Q=0,te=!1;function At(t,e){te?(e.delete(t),t(0)):(e.add(t),cs())}function cs(){K<0&&(K=0,_.frameLoop!=="demand"&&ge(ls))}function Js(){K=-1}function ls(){~K&&(ge(ls),_.batchedUpdates(fs))}function fs(){const t=K;K=_.now();const e=us(K);if(e&&(hs(tt.splice(0,e),s=>s.handler()),Q-=e),!Q){Js();return}Ft.flush(),he.flush(t?Math.min(64,K-t):16.667),pe.flush(),de.flush(),me.flush()}function Et(){let t=new Set,e=t;return{add(s){Q+=e==t&&!t.has(s)?1:0,t.add(s)},delete(s){return Q-=e==t&&t.has(s)?1:0,t.delete(s)},flush(s){e.size&&(t=new Set,Q-=e.size,hs(e,i=>i(s)&&t.add(i)),Q+=t.size,e=t)}}}function hs(t,e){t.forEach(s=>{try{e(s)}catch(i){_.catch(i)}})}var ti=Object.defineProperty,ei=(t,e)=>{for(var s in e)ti(t,s,{get:e[s],enumerable:!0})},N={};ei(N,{assign:()=>ii,colors:()=>G,createStringInterpolator:()=>ye,skipAnimation:()=>ps,to:()=>ds,willAdvance:()=>_e});function ee(){}var si=(t,e,s)=>Object.defineProperty(t,e,{value:s,writable:!0,configurable:!0}),c={arr:Array.isArray,obj:t=>!!t&&t.constructor.name==="Object",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",und:t=>t===void 0};function q(t,e){if(c.arr(t)){if(!c.arr(e)||t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}return t===e}var S=(t,e)=>t.forEach(e);function B(t,e,s){if(c.arr(t)){for(let i=0;i<t.length;i++)e.call(s,t[i],`${i}`);return}for(const i in t)t.hasOwnProperty(i)&&e.call(s,t[i],i)}var R=t=>c.und(t)?[]:c.arr(t)?t:[t];function lt(t,e){if(t.size){const s=Array.from(t);t.clear(),S(s,e)}}var ct=(t,...e)=>lt(t,s=>s(...e)),ve=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ye,ds,G=null,ps=!1,_e=ee,ii=t=>{t.to&&(ds=t.to),t.now&&(_.now=t.now),t.colors!==void 0&&(G=t.colors),t.skipAnimation!=null&&(ps=t.skipAnimation),t.createStringInterpolator&&(ye=t.createStringInterpolator),t.requestAnimationFrame&&_.use(t.requestAnimationFrame),t.batchedUpdates&&(_.batchedUpdates=t.batchedUpdates),t.willAdvance&&(_e=t.willAdvance),t.frameLoop&&(_.frameLoop=t.frameLoop)},ft=new Set,L=[],Gt=[],Rt=0,jt={get idle(){return!ft.size&&!L.length},start(t){Rt>t.priority?(ft.add(t),_.onStart(ni)):(ms(t),_(se))},advance:se,sort(t){if(Rt)_.onFrame(()=>jt.sort(t));else{const e=L.indexOf(t);~e&&(L.splice(e,1),gs(t))}},clear(){L=[],ft.clear()}};function ni(){ft.forEach(ms),ft.clear(),_(se)}function ms(t){L.includes(t)||gs(t)}function gs(t){L.splice(ri(L,e=>e.priority>t.priority),0,t)}function se(t){const e=Gt;for(let s=0;s<L.length;s++){const i=L[s];Rt=i.priority,i.idle||(_e(i),i.advance(t),i.idle||e.push(i))}return Rt=0,Gt=L,Gt.length=0,L=e,L.length>0}function ri(t,e){const s=t.findIndex(e);return s<0?t.length:s}var oi={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},U="[-+]?\\d*\\.?\\d+",Dt=U+"%";function Ut(...t){return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var ai=new RegExp("rgb"+Ut(U,U,U)),ui=new RegExp("rgba"+Ut(U,U,U,U)),ci=new RegExp("hsl"+Ut(U,Dt,Dt)),li=new RegExp("hsla"+Ut(U,Dt,Dt,U)),fi=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hi=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,di=/^#([0-9a-fA-F]{6})$/,pi=/^#([0-9a-fA-F]{8})$/;function mi(t){let e;return typeof t=="number"?t>>>0===t&&t>=0&&t<=4294967295?t:null:(e=di.exec(t))?parseInt(e[1]+"ff",16)>>>0:G&&G[t]!==void 0?G[t]:(e=ai.exec(t))?(Z(e[1])<<24|Z(e[2])<<16|Z(e[3])<<8|255)>>>0:(e=ui.exec(t))?(Z(e[1])<<24|Z(e[2])<<16|Z(e[3])<<8|Ce(e[4]))>>>0:(e=fi.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+"ff",16)>>>0:(e=pi.exec(t))?parseInt(e[1],16)>>>0:(e=hi.exec(t))?parseInt(e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+e[4]+e[4],16)>>>0:(e=ci.exec(t))?(Te(ke(e[1]),Tt(e[2]),Tt(e[3]))|255)>>>0:(e=li.exec(t))?(Te(ke(e[1]),Tt(e[2]),Tt(e[3]))|Ce(e[4]))>>>0:null}function Ht(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function Te(t,e,s){const i=s<.5?s*(1+e):s+e-s*e,n=2*s-i,r=Ht(n,i,t+1/3),o=Ht(n,i,t),a=Ht(n,i,t-1/3);return Math.round(r*255)<<24|Math.round(o*255)<<16|Math.round(a*255)<<8}function Z(t){const e=parseInt(t,10);return e<0?0:e>255?255:e}function ke(t){return(parseFloat(t)%360+360)%360/360}function Ce(t){const e=parseFloat(t);return e<0?0:e>1?255:Math.round(e*255)}function Tt(t){const e=parseFloat(t);return e<0?0:e>100?1:e/100}function Oe(t){let e=mi(t);if(e===null)return t;e=e||0;const s=(e&4278190080)>>>24,i=(e&16711680)>>>16,n=(e&65280)>>>8,r=(e&255)/255;return`rgba(${s}, ${i}, ${n}, ${r})`}var pt=(t,e,s)=>{if(c.fun(t))return t;if(c.arr(t))return pt({range:t,output:e,extrapolate:s});if(c.str(t.output[0]))return ye(t);const i=t,n=i.output,r=i.range||[0,1],o=i.extrapolateLeft||i.extrapolate||"extend",a=i.extrapolateRight||i.extrapolate||"extend",f=i.easing||(u=>u);return u=>{const l=vi(u,r);return gi(u,r[l],r[l+1],n[l],n[l+1],f,o,a,i.map)}};function gi(t,e,s,i,n,r,o,a,f){let u=f?f(t):t;if(u<e){if(o==="identity")return u;o==="clamp"&&(u=e)}if(u>s){if(a==="identity")return u;a==="clamp"&&(u=s)}return i===n?i:e===s?t<=e?i:n:(e===-1/0?u=-u:s===1/0?u=u-e:u=(u-e)/(s-e),u=r(u),i===-1/0?u=-u:n===1/0?u=u+i:u=u*(n-i)+i,u)}function vi(t,e){for(var s=1;s<e.length-1&&!(e[s]>=t);++s);return s-1}var yi={linear:t=>t},mt=Symbol.for("FluidValue.get"),st=Symbol.for("FluidValue.observers"),V=t=>!!(t&&t[mt]),O=t=>t&&t[mt]?t[mt]():t,Re=t=>t[st]||null;function _i(t,e){t.eventObserved?t.eventObserved(e):t(e)}function gt(t,e){const s=t[st];s&&s.forEach(i=>{_i(i,e)})}var vs=class{constructor(t){if(!t&&!(t=this.get))throw Error("Unknown getter");bi(this,t)}},bi=(t,e)=>ys(t,mt,e);function it(t,e){if(t[mt]){let s=t[st];s||ys(t,st,s=new Set),s.has(e)||(s.add(e),t.observerAdded&&t.observerAdded(s.size,e))}return e}function vt(t,e){const s=t[st];if(s&&s.has(e)){const i=s.size-1;i?s.delete(e):t[st]=null,t.observerRemoved&&t.observerRemoved(i,e)}}var ys=(t,e,s)=>Object.defineProperty(t,e,{value:s,writable:!0,configurable:!0}),kt=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,wi=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,De=new RegExp(`(${kt.source})(%|[a-z]+)`,"i"),Si=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Nt=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,_s=t=>{const[e,s]=Ai(t);if(!e||ve())return t;const i=window.getComputedStyle(document.documentElement).getPropertyValue(e);if(i)return i.trim();if(s&&s.startsWith("--")){const n=window.getComputedStyle(document.documentElement).getPropertyValue(s);return n||t}else{if(s&&Nt.test(s))return _s(s);if(s)return s}return t},Ai=t=>{const e=Nt.exec(t);if(!e)return[,];const[,s,i]=e;return[s,i]},Yt,Ei=(t,e,s,i,n)=>`rgba(${Math.round(e)}, ${Math.round(s)}, ${Math.round(i)}, ${n})`,bs=t=>{Yt||(Yt=G?new RegExp(`(${Object.keys(G).join("|")})(?!\\w)`,"g"):/^\b$/);const e=t.output.map(r=>O(r).replace(Nt,_s).replace(wi,Oe).replace(Yt,Oe)),s=e.map(r=>r.match(kt).map(Number)),n=s[0].map((r,o)=>s.map(a=>{if(!(o in a))throw Error('The arity of each "output" value must be equal');return a[o]})).map(r=>pt({...t,output:r}));return r=>{var f;const o=!De.test(e[0])&&((f=e.find(u=>De.test(u)))==null?void 0:f.replace(kt,""));let a=0;return e[0].replace(kt,()=>`${n[a++](r)}${o||""}`).replace(Si,Ei)}},be="react-spring: ",ws=t=>{const e=t;let s=!1;if(typeof e!="function")throw new TypeError(`${be}once requires a function parameter`);return(...i)=>{s||(e(...i),s=!0)}},Ii=ws(console.warn);function Pi(){Ii(`${be}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var xi=ws(console.warn);function Ti(){xi(`${be}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function $t(t){return c.str(t)&&(t[0]=="#"||/\d/.test(t)||!ve()&&Nt.test(t)||t in(G||{}))}var we=ve()?E.useEffect:E.useLayoutEffect,ki=()=>{const t=E.useRef(!1);return we(()=>(t.current=!0,()=>{t.current=!1}),[]),t};function Ss(){const t=E.useState()[1],e=ki();return()=>{e.current&&t(Math.random())}}function Ci(t,e){const[s]=E.useState(()=>({inputs:e,result:t()})),i=E.useRef(),n=i.current;let r=n;return r?e&&r.inputs&&Oi(e,r.inputs)||(r={inputs:e,result:t()}):r=s,E.useEffect(()=>{i.current=r,n==s&&(s.inputs=s.result=void 0)},[r]),r.result}function Oi(t,e){if(t.length!==e.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==e[s])return!1;return!0}var As=t=>E.useEffect(t,Ri),Ri=[];function Ve(t){const e=E.useRef();return E.useEffect(()=>{e.current=t}),e.current}var yt=Symbol.for("Animated:node"),Di=t=>!!t&&t[yt]===t,$=t=>t&&t[yt],Se=(t,e)=>si(t,yt,e),Bt=t=>t&&t[yt]&&t[yt].getPayload(),Es=class{constructor(){Se(this,this)}getPayload(){return this.payload||[]}},It=class extends Es{constructor(t){super(),this._value=t,this.done=!0,this.durationProgress=0,c.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new It(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,e){return c.num(t)&&(this.lastPosition=t,e&&(t=Math.round(t/e)*e,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,c.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}},_t=class extends It{constructor(t){super(0),this._string=null,this._toString=pt({output:[t,t]})}static create(t){return new _t(t)}getValue(){const t=this._string;return t??(this._string=this._toString(this._value))}setValue(t){if(c.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=pt({output:[this.getValue(),t]})),this._value=0,super.reset()}},Vt={dependencies:null},qt=class extends Es{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const e={};return B(this.source,(s,i)=>{Di(s)?e[i]=s.getValue(t):V(s)?e[i]=O(s):t||(e[i]=s)}),e}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&S(this.payload,t=>t.reset())}_makePayload(t){if(t){const e=new Set;return B(t,this._addToPayload,e),Array.from(e)}}_addToPayload(t){Vt.dependencies&&V(t)&&Vt.dependencies.add(t);const e=Bt(t);e&&S(e,s=>this.add(s))}},Is=class extends qt{constructor(t){super(t)}static create(t){return new Is(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const e=this.getPayload();return t.length==e.length?e.map((s,i)=>s.setValue(t[i])).some(Boolean):(super.setValue(t.map(Vi)),!0)}};function Vi(t){return($t(t)?_t:It).create(t)}function ie(t){const e=$(t);return e?e.constructor:c.arr(t)?Is:$t(t)?_t:It}var Me=(t,e)=>{const s=!c.fun(t)||t.prototype&&t.prototype.isReactComponent;return E.forwardRef((i,n)=>{const r=E.useRef(null),o=s&&E.useCallback(v=>{r.current=Fi(n,v)},[n]),[a,f]=Li(i,e),u=Ss(),l=()=>{const v=r.current;if(s&&!v)return;(v?e.applyAnimatedValues(v,a.getValue(!0)):!1)===!1&&u()},h=new Mi(l,f),d=E.useRef();we(()=>(d.current=h,S(f,v=>it(v,h)),()=>{d.current&&(S(d.current.deps,v=>vt(v,d.current)),_.cancel(d.current.update))})),E.useEffect(l,[]),As(()=>()=>{const v=d.current;S(v.deps,g=>vt(g,v))});const m=e.getComponentProps(a.getValue());return E.createElement(t,{...m,ref:o})})},Mi=class{constructor(t,e){this.update=t,this.deps=e}eventObserved(t){t.type=="change"&&_.write(this.update)}};function Li(t,e){const s=new Set;return Vt.dependencies=s,t.style&&(t={...t,style:e.createAnimatedStyle(t.style)}),t=new qt(t),Vt.dependencies=null,[t,s]}function Fi(t,e){return t&&(c.fun(t)?t(e):t.current=e),e}var Le=Symbol.for("AnimatedComponent"),ji=(t,{applyAnimatedValues:e=()=>!1,createAnimatedStyle:s=n=>new qt(n),getComponentProps:i=n=>n}={})=>{const n={applyAnimatedValues:e,createAnimatedStyle:s,getComponentProps:i},r=o=>{const a=Fe(o)||"Anonymous";return c.str(o)?o=r[o]||(r[o]=Me(o,n)):o=o[Le]||(o[Le]=Me(o,n)),o.displayName=`Animated(${a})`,o};return B(t,(o,a)=>{c.arr(t)&&(a=Fe(o)),r[a]=r(o)}),{animated:r}},Fe=t=>c.str(t)?t:t&&c.str(t.displayName)?t.displayName:c.fun(t)&&t.name||null;function H(t,...e){return c.fun(t)?t(...e):t}var ht=(t,e)=>t===!0||!!(e&&t&&(c.fun(t)?t(e):R(t).includes(e))),Ps=(t,e)=>c.obj(t)?e&&t[e]:t,xs=(t,e)=>t.default===!0?t[e]:t.default?t.default[e]:void 0,Ui=t=>t,Ae=(t,e=Ui)=>{let s=Ni;t.default&&t.default!==!0&&(t=t.default,s=Object.keys(t));const i={};for(const n of s){const r=e(t[n],n);c.und(r)||(i[n]=r)}return i},Ni=["config","onProps","onStart","onChange","onPause","onResume","onRest"],$i={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Bi(t){const e={};let s=0;if(B(t,(i,n)=>{$i[n]||(e[n]=i,s++)}),s)return e}function Ts(t){const e=Bi(t);if(e){const s={to:e};return B(t,(i,n)=>n in e||(s[n]=i)),s}return{...t}}function bt(t){return t=O(t),c.arr(t)?t.map(bt):$t(t)?N.createStringInterpolator({range:[0,1],output:[t,t]})(1):t}function qi(t){for(const e in t)return!0;return!1}function ne(t){return c.fun(t)||c.arr(t)&&c.obj(t[0])}function zi(t,e){var s;(s=t.ref)==null||s.delete(t),e==null||e.delete(t)}function Ki(t,e){var s;e&&t.ref!==e&&((s=t.ref)==null||s.delete(t),e.add(t),t.ref=e)}var Qi={default:{tension:170,friction:26}},re={...Qi.default,mass:1,damping:1,easing:yi.linear,clamp:!1},Gi=class{constructor(){this.velocity=0,Object.assign(this,re)}};function Hi(t,e,s){s&&(s={...s},je(s,e),e={...s,...e}),je(t,e),Object.assign(t,e);for(const o in re)t[o]==null&&(t[o]=re[o]);let{frequency:i,damping:n}=t;const{mass:r}=t;return c.und(i)||(i<.01&&(i=.01),n<0&&(n=0),t.tension=Math.pow(2*Math.PI/i,2)*r,t.friction=4*Math.PI*n*r/i),t}function je(t,e){if(!c.und(e.decay))t.duration=void 0;else{const s=!c.und(e.tension)||!c.und(e.friction);(s||!c.und(e.frequency)||!c.und(e.damping)||!c.und(e.mass))&&(t.duration=void 0,t.decay=void 0),s&&(t.frequency=void 0)}}var Ue=[],Yi=class{constructor(){this.changed=!1,this.values=Ue,this.toValues=null,this.fromValues=Ue,this.config=new Gi,this.immediate=!1}};function ks(t,{key:e,props:s,defaultProps:i,state:n,actions:r}){return new Promise((o,a)=>{let f,u,l=ht(s.cancel??(i==null?void 0:i.cancel),e);if(l)m();else{c.und(s.pause)||(n.paused=ht(s.pause,e));let v=i==null?void 0:i.pause;v!==!0&&(v=n.paused||ht(v,e)),f=H(s.delay||0,e),v?(n.resumeQueue.add(d),r.pause()):(r.resume(),d())}function h(){n.resumeQueue.add(d),n.timeouts.delete(u),u.cancel(),f=u.time-_.now()}function d(){f>0&&!N.skipAnimation?(n.delayed=!0,u=_.setTimeout(m,f),n.pauseQueue.add(h),n.timeouts.add(u)):m()}function m(){n.delayed&&(n.delayed=!1),n.pauseQueue.delete(h),n.timeouts.delete(u),t<=(n.cancelId||0)&&(l=!0);try{r.start({...s,callId:t,cancel:l},o)}catch(v){a(v)}}})}var Ee=(t,e)=>e.length==1?e[0]:e.some(s=>s.cancelled)?et(t.get()):e.every(s=>s.noop)?Cs(t.get()):j(t.get(),e.every(s=>s.finished)),Cs=t=>({value:t,noop:!0,finished:!0,cancelled:!1}),j=(t,e,s=!1)=>({value:t,finished:e,cancelled:s}),et=t=>({value:t,cancelled:!0,finished:!1});function Os(t,e,s,i){const{callId:n,parentId:r,onRest:o}=e,{asyncTo:a,promise:f}=s;return!r&&t===a&&!e.reset?f:s.promise=(async()=>{s.asyncId=n,s.asyncTo=t;const u=Ae(e,(b,p)=>p==="onRest"?void 0:b);let l,h;const d=new Promise((b,p)=>(l=b,h=p)),m=b=>{const p=n<=(s.cancelId||0)&&et(i)||n!==s.asyncId&&j(i,!1);if(p)throw b.result=p,h(b),b},v=(b,p)=>{const w=new Ne,y=new $e;return(async()=>{if(N.skipAnimation)throw wt(s),y.result=j(i,!1),h(y),y;m(w);const A=c.obj(b)?{...b}:{...p,to:b};A.parentId=n,B(u,(k,C)=>{c.und(A[C])&&(A[C]=k)});const x=await i.start(A);return m(w),s.paused&&await new Promise(k=>{s.resumeQueue.add(k)}),x})()};let g;if(N.skipAnimation)return wt(s),j(i,!1);try{let b;c.arr(t)?b=(async p=>{for(const w of p)await v(w)})(t):b=Promise.resolve(t(v,i.stop.bind(i))),await Promise.all([b.then(l),d]),g=j(i.get(),!0,!1)}catch(b){if(b instanceof Ne)g=b.result;else if(b instanceof $e)g=b.result;else throw b}finally{n==s.asyncId&&(s.asyncId=r,s.asyncTo=r?a:void 0,s.promise=r?f:void 0)}return c.fun(o)&&_.batchedUpdates(()=>{o(g,i,i.item)}),g})()}function wt(t,e){lt(t.timeouts,s=>s.cancel()),t.pauseQueue.clear(),t.resumeQueue.clear(),t.asyncId=t.asyncTo=t.promise=void 0,e&&(t.cancelId=e)}var Ne=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},$e=class extends Error{constructor(){super("SkipAnimationSignal")}},oe=t=>t instanceof Ie,Wi=1,Ie=class extends vs{constructor(){super(...arguments),this.id=Wi++,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=$(this);return t&&t.getValue()}to(...t){return N.to(this,t)}interpolate(...t){return Pi(),N.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,e=!1){gt(this,{type:"change",parent:this,value:t,idle:e})}_onPriorityChange(t){this.idle||jt.sort(this),gt(this,{type:"priority",parent:this,priority:t})}},Y=Symbol.for("SpringPhase"),Rs=1,ae=2,ue=4,Wt=t=>(t[Y]&Rs)>0,z=t=>(t[Y]&ae)>0,ot=t=>(t[Y]&ue)>0,Be=(t,e)=>e?t[Y]|=ae|Rs:t[Y]&=~ae,qe=(t,e)=>e?t[Y]|=ue:t[Y]&=~ue,Xi=class extends Ie{constructor(t,e){if(super(),this.animation=new Yi,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!c.und(t)||!c.und(e)){const s=c.obj(t)?{...t}:{...e,from:t};c.und(s.default)&&(s.default=!0),this.start(s)}}get idle(){return!(z(this)||this._state.asyncTo)||ot(this)}get goal(){return O(this.animation.to)}get velocity(){const t=$(this);return t instanceof It?t.lastVelocity||0:t.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return Wt(this)}get isAnimating(){return z(this)}get isPaused(){return ot(this)}get isDelayed(){return this._state.delayed}advance(t){let e=!0,s=!1;const i=this.animation;let{toValues:n}=i;const{config:r}=i,o=Bt(i.to);!o&&V(i.to)&&(n=R(O(i.to))),i.values.forEach((u,l)=>{if(u.done)return;const h=u.constructor==_t?1:o?o[l].lastPosition:n[l];let d=i.immediate,m=h;if(!d){if(m=u.lastPosition,r.tension<=0){u.done=!0;return}let v=u.elapsedTime+=t;const g=i.fromValues[l],b=u.v0!=null?u.v0:u.v0=c.arr(r.velocity)?r.velocity[l]:r.velocity;let p;const w=r.precision||(g==h?.005:Math.min(1,Math.abs(h-g)*.001));if(c.und(r.duration))if(r.decay){const y=r.decay===!0?.998:r.decay,A=Math.exp(-(1-y)*v);m=g+b/(1-y)*(1-A),d=Math.abs(u.lastPosition-m)<=w,p=b*A}else{p=u.lastVelocity==null?b:u.lastVelocity;const y=r.restVelocity||w/10,A=r.clamp?0:r.bounce,x=!c.und(A),k=g==h?u.v0>0:g<h;let C,xt=!1;const D=1,rt=Math.ceil(t/D);for(let F=0;F<rt&&(C=Math.abs(p)>y,!(!C&&(d=Math.abs(h-m)<=w,d)));++F){x&&(xt=m==h||m>h==k,xt&&(p=-p*A,m=h));const W=-r.tension*1e-6*(m-h),X=-r.friction*.001*p,Xs=(W+X)/r.mass;p=p+Xs*D,m=m+p*D}}else{let y=1;r.duration>0&&(this._memoizedDuration!==r.duration&&(this._memoizedDuration=r.duration,u.durationProgress>0&&(u.elapsedTime=r.duration*u.durationProgress,v=u.elapsedTime+=t)),y=(r.progress||0)+v/this._memoizedDuration,y=y>1?1:y<0?0:y,u.durationProgress=y),m=g+r.easing(y)*(h-g),p=(m-u.lastPosition)/t,d=y==1}u.lastVelocity=p,Number.isNaN(m)&&(console.warn("Got NaN while animating:",this),d=!0)}o&&!o[l].done&&(d=!1),d?u.done=!0:e=!1,u.setValue(m,r.round)&&(s=!0)});const a=$(this),f=a.getValue();if(e){const u=O(i.to);(f!==u||s)&&!r.decay?(a.setValue(u),this._onChange(u)):s&&r.decay&&this._onChange(f),this._stop()}else s&&this._onChange(f)}set(t){return _.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(z(this)){const{to:t,config:e}=this.animation;_.batchedUpdates(()=>{this._onStart(),e.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,e){let s;return c.und(t)?(s=this.queue||[],this.queue=[]):s=[c.obj(t)?t:{...e,to:t}],Promise.all(s.map(i=>this._update(i))).then(i=>Ee(this,i))}stop(t){const{to:e}=this.animation;return this._focus(this.get()),wt(this._state,t&&this._lastCallId),_.batchedUpdates(()=>this._stop(e,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const e=this.key||"";let{to:s,from:i}=t;s=c.obj(s)?s[e]:s,(s==null||ne(s))&&(s=void 0),i=c.obj(i)?i[e]:i,i==null&&(i=void 0);const n={to:s,from:i};return Wt(this)||(t.reverse&&([s,i]=[i,s]),i=O(i),c.und(i)?$(this)||this._set(s):this._set(i)),n}_update({...t},e){const{key:s,defaultProps:i}=this;t.default&&Object.assign(i,Ae(t,(o,a)=>/^on/.test(a)?Ps(o,s):o)),Ke(this,t,"onProps"),ut(this,"onProps",t,this);const n=this._prepareNode(t);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const r=this._state;return ks(++this._lastCallId,{key:s,props:t,defaultProps:i,state:r,actions:{pause:()=>{ot(this)||(qe(this,!0),ct(r.pauseQueue),ut(this,"onPause",j(this,at(this,this.animation.to)),this))},resume:()=>{ot(this)&&(qe(this,!1),z(this)&&this._resume(),ct(r.resumeQueue),ut(this,"onResume",j(this,at(this,this.animation.to)),this))},start:this._merge.bind(this,n)}}).then(o=>{if(t.loop&&o.finished&&!(e&&o.noop)){const a=Ds(t);if(a)return this._update(a,!0)}return o})}_merge(t,e,s){if(e.cancel)return this.stop(!0),s(et(this));const i=!c.und(t.to),n=!c.und(t.from);if(i||n)if(e.callId>this._lastToId)this._lastToId=e.callId;else return s(et(this));const{key:r,defaultProps:o,animation:a}=this,{to:f,from:u}=a;let{to:l=f,from:h=u}=t;n&&!i&&(!e.default||c.und(l))&&(l=h),e.reverse&&([l,h]=[h,l]);const d=!q(h,u);d&&(a.from=h),h=O(h);const m=!q(l,f);m&&this._focus(l);const v=ne(e.to),{config:g}=a,{decay:b,velocity:p}=g;(i||n)&&(g.velocity=0),e.config&&!v&&Hi(g,H(e.config,r),e.config!==o.config?H(o.config,r):void 0);let w=$(this);if(!w||c.und(l))return s(j(this,!0));const y=c.und(e.reset)?n&&!e.default:!c.und(h)&&ht(e.reset,r),A=y?h:this.get(),x=bt(l),k=c.num(x)||c.arr(x)||$t(x),C=!v&&(!k||ht(o.immediate||e.immediate,r));if(m){const F=ie(l);if(F!==w.constructor)if(C)w=this._set(x);else throw Error(`Cannot animate between ${w.constructor.name} and ${F.name}, as the "to" prop suggests`)}const xt=w.constructor;let D=V(l),rt=!1;if(!D){const F=y||!Wt(this)&&d;(m||F)&&(rt=q(bt(A),x),D=!rt),(!q(a.immediate,C)&&!C||!q(g.decay,b)||!q(g.velocity,p))&&(D=!0)}if(rt&&z(this)&&(a.changed&&!y?D=!0:D||this._stop(f)),!v&&((D||V(f))&&(a.values=w.getPayload(),a.toValues=V(l)?null:xt==_t?[1]:R(x)),a.immediate!=C&&(a.immediate=C,!C&&!y&&this._set(f)),D)){const{onRest:F}=a;S(Ji,X=>Ke(this,e,X));const W=j(this,at(this,f));ct(this._pendingCalls,W),this._pendingCalls.add(s),a.changed&&_.batchedUpdates(()=>{var X;a.changed=!y,F==null||F(W,this),y?H(o.onRest,W):(X=a.onStart)==null||X.call(a,W,this)})}y&&this._set(A),v?s(Os(e.to,e,this._state,this)):D?this._start():z(this)&&!m?this._pendingCalls.add(s):s(Cs(A))}_focus(t){const e=this.animation;t!==e.to&&(Re(this)&&this._detach(),e.to=t,Re(this)&&this._attach())}_attach(){let t=0;const{to:e}=this.animation;V(e)&&(it(e,this),oe(e)&&(t=e.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;V(t)&&vt(t,this)}_set(t,e=!0){const s=O(t);if(!c.und(s)){const i=$(this);if(!i||!q(s,i.getValue())){const n=ie(s);!i||i.constructor!=n?Se(this,n.create(s)):i.setValue(s),i&&_.batchedUpdates(()=>{this._onChange(s,e)})}}return $(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,ut(this,"onStart",j(this,at(this,t.to)),this))}_onChange(t,e){e||(this._onStart(),H(this.animation.onChange,t,this)),H(this.defaultProps.onChange,t,this),super._onChange(t,e)}_start(){const t=this.animation;$(this).reset(O(t.to)),t.immediate||(t.fromValues=t.values.map(e=>e.lastPosition)),z(this)||(Be(this,!0),ot(this)||this._resume())}_resume(){N.skipAnimation?this.finish():jt.start(this)}_stop(t,e){if(z(this)){Be(this,!1);const s=this.animation;S(s.values,n=>{n.done=!0}),s.toValues&&(s.onChange=s.onPause=s.onResume=void 0),gt(this,{type:"idle",parent:this});const i=e?et(this.get()):j(this.get(),at(this,t??s.to));ct(this._pendingCalls,i),s.changed&&(s.changed=!1,ut(this,"onRest",i,this))}}};function at(t,e){const s=bt(e),i=bt(t.get());return q(i,s)}function Ds(t,e=t.loop,s=t.to){const i=H(e);if(i){const n=i!==!0&&Ts(i),r=(n||t).reverse,o=!n||n.reset;return St({...t,loop:e,default:!1,pause:void 0,to:!r||ne(s)?s:void 0,from:o?t.from:void 0,reset:o,...n})}}function St(t){const{to:e,from:s}=t=Ts(t),i=new Set;return c.obj(e)&&ze(e,i),c.obj(s)&&ze(s,i),t.keys=i.size?Array.from(i):null,t}function Zi(t){const e=St(t);return c.und(e.default)&&(e.default=Ae(e)),e}function ze(t,e){B(t,(s,i)=>s!=null&&e.add(i))}var Ji=["onStart","onRest","onChange","onPause","onResume"];function Ke(t,e,s){t.animation[s]=e[s]!==xs(e,s)?Ps(e[s],t.key):void 0}function ut(t,e,...s){var i,n,r,o;(n=(i=t.animation)[e])==null||n.call(i,...s),(o=(r=t.defaultProps)[e])==null||o.call(r,...s)}var tn=["onStart","onChange","onRest"],en=1,sn=class{constructor(e,s){this.id=en++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),s&&(this._flush=s),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((s,i)=>e[i]=s.get()),e}set(e){for(const s in e){const i=e[s];c.und(i)||this.springs[s].set(i)}}update(e){return e&&this.queue.push(St(e)),this}start(e){let{queue:s}=this;return e?s=R(e).map(St):this.queue=[],this._flush?this._flush(this,s):(js(this,s),ce(this,s))}stop(e,s){if(e!==!!e&&(s=e),s){const i=this.springs;S(R(s),n=>i[n].stop(!!e))}else wt(this._state,this._lastAsyncId),this.each(i=>i.stop(!!e));return this}pause(e){if(c.und(e))this.start({pause:!0});else{const s=this.springs;S(R(e),i=>s[i].pause())}return this}resume(e){if(c.und(e))this.start({pause:!1});else{const s=this.springs;S(R(e),i=>s[i].resume())}return this}each(e){B(this.springs,e)}_onFrame(){const{onStart:e,onChange:s,onRest:i}=this._events,n=this._active.size>0,r=this._changed.size>0;(n&&!this._started||r&&!this._started)&&(this._started=!0,lt(e,([f,u])=>{u.value=this.get(),f(u,this,this._item)}));const o=!n&&this._started,a=r||o&&i.size?this.get():null;r&&s.size&&lt(s,([f,u])=>{u.value=a,f(u,this,this._item)}),o&&(this._started=!1,lt(i,([f,u])=>{u.value=a,f(u,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;_.onFrame(this._onFrame)}};function ce(t,e){return Promise.all(e.map(s=>Vs(t,s))).then(s=>Ee(t,s))}async function Vs(t,e,s){const{keys:i,to:n,from:r,loop:o,onRest:a,onResolve:f}=e,u=c.obj(e.default)&&e.default;o&&(e.loop=!1),n===!1&&(e.to=null),r===!1&&(e.from=null);const l=c.arr(n)||c.fun(n)?n:void 0;l?(e.to=void 0,e.onRest=void 0,u&&(u.onRest=void 0)):S(tn,g=>{const b=e[g];if(c.fun(b)){const p=t._events[g];e[g]=({finished:w,cancelled:y})=>{const A=p.get(b);A?(w||(A.finished=!1),y&&(A.cancelled=!0)):p.set(b,{value:null,finished:w||!1,cancelled:y||!1})},u&&(u[g]=e[g])}});const h=t._state;e.pause===!h.paused?(h.paused=e.pause,ct(e.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(e.pause=!0);const d=(i||Object.keys(t.springs)).map(g=>t.springs[g].start(e)),m=e.cancel===!0||xs(e,"cancel")===!0;(l||m&&h.asyncId)&&d.push(ks(++t._lastAsyncId,{props:e,state:h,actions:{pause:ee,resume:ee,start(g,b){m?(wt(h,t._lastAsyncId),b(et(t))):(g.onRest=a,b(Os(l,g,h,t)))}}})),h.paused&&await new Promise(g=>{h.resumeQueue.add(g)});const v=Ee(t,await Promise.all(d));if(o&&v.finished&&!(s&&v.noop)){const g=Ds(e,o,n);if(g)return js(t,[g]),Vs(t,g,!0)}return f&&_.batchedUpdates(()=>f(v,t,t.item)),v}function Qe(t,e){const s={...t.springs};return e&&S(R(e),i=>{c.und(i.keys)&&(i=St(i)),c.obj(i.to)||(i={...i,to:void 0}),Fs(s,i,n=>Ls(n))}),Ms(t,s),s}function Ms(t,e){B(e,(s,i)=>{t.springs[i]||(t.springs[i]=s,it(s,t))})}function Ls(t,e){const s=new Xi;return s.key=t,e&&it(s,e),s}function Fs(t,e,s){e.keys&&S(e.keys,i=>{(t[i]||(t[i]=s(i)))._prepareNode(e)})}function js(t,e){S(e,s=>{Fs(t.springs,s,i=>Ls(i,t))})}var zt=({children:t,...e})=>{const s=E.useContext(Mt),i=e.pause||!!s.pause,n=e.immediate||!!s.immediate;e=Ci(()=>({pause:i,immediate:n}),[i,n]);const{Provider:r}=Mt;return E.createElement(r,{value:e},t)},Mt=nn(zt,{});zt.Provider=Mt.Provider;zt.Consumer=Mt.Consumer;function nn(t,e){return Object.assign(t,E.createContext(e)),t.Provider._context=t,t.Consumer._context=t,t}var rn=()=>{const t=[],e=function(i){Ti();const n=[];return S(t,(r,o)=>{if(c.und(i))n.push(r.start());else{const a=s(i,r,o);a&&n.push(r.start(a))}}),n};e.current=t,e.add=function(i){t.includes(i)||t.push(i)},e.delete=function(i){const n=t.indexOf(i);~n&&t.splice(n,1)},e.pause=function(){return S(t,i=>i.pause(...arguments)),this},e.resume=function(){return S(t,i=>i.resume(...arguments)),this},e.set=function(i){S(t,(n,r)=>{const o=c.fun(i)?i(r,n):i;o&&n.set(o)})},e.start=function(i){const n=[];return S(t,(r,o)=>{if(c.und(i))n.push(r.start());else{const a=this._getProps(i,r,o);a&&n.push(r.start(a))}}),n},e.stop=function(){return S(t,i=>i.stop(...arguments)),this},e.update=function(i){return S(t,(n,r)=>n.update(this._getProps(i,n,r))),this};const s=function(i,n,r){return c.fun(i)?i(r,n):i};return e._getProps=s,e};function on(t,e,s){const i=c.fun(e)&&e;i&&!s&&(s=[]);const n=E.useMemo(()=>i||arguments.length==3?rn():void 0,[]),r=E.useRef(0),o=Ss(),a=E.useMemo(()=>({ctrls:[],queue:[],flush(p,w){const y=Qe(p,w);return r.current>0&&!a.queue.length&&!Object.keys(y).some(x=>!p.springs[x])?ce(p,w):new Promise(x=>{Ms(p,y),a.queue.push(()=>{x(ce(p,w))}),o()})}}),[]),f=E.useRef([...a.ctrls]),u=[],l=Ve(t)||0;E.useMemo(()=>{S(f.current.slice(t,l),p=>{zi(p,n),p.stop(!0)}),f.current.length=t,h(l,t)},[t]),E.useMemo(()=>{h(0,Math.min(l,t))},s);function h(p,w){for(let y=p;y<w;y++){const A=f.current[y]||(f.current[y]=new sn(null,a.flush)),x=i?i(y,A):e[y];x&&(u[y]=Zi(x))}}const d=f.current.map((p,w)=>Qe(p,u[w])),m=E.useContext(zt),v=Ve(m),g=m!==v&&qi(m);we(()=>{r.current++,a.ctrls=f.current;const{queue:p}=a;p.length&&(a.queue=[],S(p,w=>w())),S(f.current,(w,y)=>{n==null||n.add(w),g&&w.start({default:m});const A=u[y];A&&(Ki(w,A.ref),w.ref?w.queue.push(A):w.start(A))})}),As(()=>()=>{S(a.ctrls,p=>p.stop(!0))});const b=d.map(p=>({...p}));return n?[b,n]:b}function yr(t,e){const s=c.fun(t),[[i],n]=on(1,s?t:[t],s?[]:e);return s||arguments.length==2?[i,n]:i}var an=class extends Ie{constructor(t,e){super(),this.source=t,this.idle=!0,this._active=new Set,this.calc=pt(...e);const s=this._get(),i=ie(s);Se(this,i.create(s))}advance(t){const e=this._get(),s=this.get();q(e,s)||($(this).setValue(e),this._onChange(e,this.idle)),!this.idle&&Ge(this._active)&&Xt(this)}_get(){const t=c.arr(this.source)?this.source.map(O):R(O(this.source));return this.calc(...t)}_start(){this.idle&&!Ge(this._active)&&(this.idle=!1,S(Bt(this),t=>{t.done=!1}),N.skipAnimation?(_.batchedUpdates(()=>this.advance()),Xt(this)):jt.start(this))}_attach(){let t=1;S(R(this.source),e=>{V(e)&&it(e,this),oe(e)&&(e.idle||this._active.add(e),t=Math.max(t,e.priority+1))}),this.priority=t,this._start()}_detach(){S(R(this.source),t=>{V(t)&&vt(t,this)}),this._active.clear(),Xt(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=R(this.source).reduce((e,s)=>Math.max(e,(oe(s)?s.priority:0)+1),0))}};function un(t){return t.idle!==!1}function Ge(t){return!t.size||Array.from(t).every(un)}function Xt(t){t.idle||(t.idle=!0,S(Bt(t),e=>{e.done=!0}),gt(t,{type:"idle",parent:t}))}N.assign({createStringInterpolator:bs,to:(t,e)=>new an(t,e)});var Us=/^--/;function cn(t,e){return e==null||typeof e=="boolean"||e===""?"":typeof e=="number"&&e!==0&&!Us.test(t)&&!(dt.hasOwnProperty(t)&&dt[t])?e+"px":(""+e).trim()}var He={};function ln(t,e){if(!t.nodeType||!t.setAttribute)return!1;const s=t.nodeName==="filter"||t.parentNode&&t.parentNode.nodeName==="filter",{className:i,style:n,children:r,scrollTop:o,scrollLeft:a,viewBox:f,...u}=e,l=Object.values(u),h=Object.keys(u).map(d=>s||t.hasAttribute(d)?d:He[d]||(He[d]=d.replace(/([A-Z])/g,m=>"-"+m.toLowerCase())));r!==void 0&&(t.textContent=r);for(const d in n)if(n.hasOwnProperty(d)){const m=cn(d,n[d]);Us.test(d)?t.style.setProperty(d,m):t.style[d]=m}h.forEach((d,m)=>{t.setAttribute(d,l[m])}),i!==void 0&&(t.className=i),o!==void 0&&(t.scrollTop=o),a!==void 0&&(t.scrollLeft=a),f!==void 0&&t.setAttribute("viewBox",f)}var dt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fn=(t,e)=>t+e.charAt(0).toUpperCase()+e.substring(1),hn=["Webkit","Ms","Moz","O"];dt=Object.keys(dt).reduce((t,e)=>(hn.forEach(s=>t[fn(s,e)]=t[e]),t),dt);var dn=/^(matrix|translate|scale|rotate|skew)/,pn=/^(translate)/,mn=/^(rotate|skew)/,Zt=(t,e)=>c.num(t)&&t!==0?t+e:t,Ct=(t,e)=>c.arr(t)?t.every(s=>Ct(s,e)):c.num(t)?t===e:parseFloat(t)===e,gn=class extends qt{constructor({x:t,y:e,z:s,...i}){const n=[],r=[];(t||e||s)&&(n.push([t||0,e||0,s||0]),r.push(o=>[`translate3d(${o.map(a=>Zt(a,"px")).join(",")})`,Ct(o,0)])),B(i,(o,a)=>{if(a==="transform")n.push([o||""]),r.push(f=>[f,f===""]);else if(dn.test(a)){if(delete i[a],c.und(o))return;const f=pn.test(a)?"px":mn.test(a)?"deg":"";n.push(R(o)),r.push(a==="rotate3d"?([u,l,h,d])=>[`rotate3d(${u},${l},${h},${Zt(d,f)})`,Ct(d,0)]:u=>[`${a}(${u.map(l=>Zt(l,f)).join(",")})`,Ct(u,a.startsWith("scale")?1:0)])}}),n.length&&(i.transform=new vn(n,r)),super(i)}},vn=class extends vs{constructor(t,e){super(),this.inputs=t,this.transforms=e,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let t="",e=!0;return S(this.inputs,(s,i)=>{const n=O(s[0]),[r,o]=this.transforms[i](c.arr(n)?n:s.map(O));t+=" "+r,e=e&&o}),e?"none":t}observerAdded(t){t==1&&S(this.inputs,e=>S(e,s=>V(s)&&it(s,this)))}observerRemoved(t){t==0&&S(this.inputs,e=>S(e,s=>V(s)&&vt(s,this)))}eventObserved(t){t.type=="change"&&(this._value=null),gt(this,t)}},yn=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];N.assign({batchedUpdates:Zs.unstable_batchedUpdates,createStringInterpolator:bs,colors:oi});var _n=ji(yn,{applyAnimatedValues:ln,createAnimatedStyle:t=>new gn(t),getComponentProps:({scrollTop:t,scrollLeft:e,...s})=>s}),_r=_n.animated;function bn(t,e,s){return Math.max(e,Math.min(t,s))}const P={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function Ye(t,e,s){return e===0||Math.abs(e)===1/0?Math.pow(t,s*5):t*e*s/(e+s*t)}function We(t,e,s,i=.15){return i===0?bn(t,e,s):t<e?-Ye(e-t,s-e,i)+e:t>s?+Ye(t-s,s-e,i)+s:t}function wn(t,[e,s],[i,n]){const[[r,o],[a,f]]=t;return[We(e,r,o,i),We(s,a,f,n)]}function Sn(t,e){if(typeof t!="object"||t===null)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var i=s.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function An(t){var e=Sn(t,"string");return typeof e=="symbol"?e:String(e)}function T(t,e,s){return e=An(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function Xe(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),s.push.apply(s,i)}return s}function I(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Xe(Object(s),!0).forEach(function(i){T(t,i,s[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Xe(Object(s)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(s,i))})}return t}const Ns={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Ze(t){return t?t[0].toUpperCase()+t.slice(1):""}const En=["enter","leave"];function In(t=!1,e){return t&&!En.includes(e)}function Pn(t,e="",s=!1){const i=Ns[t],n=i&&i[e]||e;return"on"+Ze(t)+Ze(n)+(In(s,n)?"Capture":"")}const xn=["gotpointercapture","lostpointercapture"];function Tn(t){let e=t.substring(2).toLowerCase();const s=!!~e.indexOf("passive");s&&(e=e.replace("passive",""));const i=xn.includes(e)?"capturecapture":"capture",n=!!~e.indexOf(i);return n&&(e=e.replace("capture","")),{device:e,capture:n,passive:s}}function kn(t,e=""){const s=Ns[t],i=s&&s[e]||e;return t+i}function Kt(t){return"touches"in t}function $s(t){return Kt(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function Cn(t){return Array.from(t.touches).filter(e=>{var s,i;return e.target===t.currentTarget||((s=t.currentTarget)===null||s===void 0||(i=s.contains)===null||i===void 0?void 0:i.call(s,e.target))})}function On(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function Bs(t){return Kt(t)?On(t)[0]:t}function le(t,e){try{const s=e.clientX-t.clientX,i=e.clientY-t.clientY,n=(e.clientX+t.clientX)/2,r=(e.clientY+t.clientY)/2,o=Math.hypot(s,i);return{angle:-(Math.atan2(s,i)*180)/Math.PI,distance:o,origin:[n,r]}}catch{}return null}function Rn(t){return Cn(t).map(e=>e.identifier)}function Je(t,e){const[s,i]=Array.from(t.touches).filter(n=>e.includes(n.identifier));return le(s,i)}function Jt(t){const e=Bs(t);return Kt(t)?e.identifier:e.pointerId}function ts(t){const e=Bs(t);return[e.clientX,e.clientY]}const es=40,ss=800;function qs(t){let{deltaX:e,deltaY:s,deltaMode:i}=t;return i===1?(e*=es,s*=es):i===2&&(e*=ss,s*=ss),[e,s]}function Dn(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:s,altKey:i,metaKey:n,ctrlKey:r}=t;Object.assign(e,{shiftKey:s,altKey:i,metaKey:n,ctrlKey:r})}return e}function Lt(t,...e){return typeof t=="function"?t(...e):t}function Vn(){}function Mn(...t){return t.length===0?Vn:t.length===1?t[0]:function(){let e;for(const s of t)e=s.apply(this,arguments)||e;return e}}function is(t,e){return Object.assign({},e,t||{})}const Ln=32;class zs{constructor(e,s,i){this.ctrl=e,this.args=s,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:s,ingKey:i,args:n}=this;s[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=n,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const s=this.state,i=this.config;s._active||(this.reset(),this.computeInitial(),s._active=!0,s.target=e.target,s.currentTarget=e.currentTarget,s.lastOffset=i.from?Lt(i.from,s):s.offset,s.offset=s.lastOffset,s.startTime=s.timeStamp=e.timeStamp)}computeValues(e){const s=this.state;s._values=e,s.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:s,config:i,shared:n}=this;s.args=this.args;let r=0;if(e&&(s.event=e,i.preventDefault&&e.cancelable&&s.event.preventDefault(),s.type=e.type,n.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,n.locked=!!document.pointerLockElement,Object.assign(n,Dn(e)),n.down=n.pressed=n.buttons%2===1||n.touches>0,r=e.timeStamp-s.timeStamp,s.timeStamp=e.timeStamp,s.elapsedTime=s.timeStamp-s.startTime),s._active){const k=s._delta.map(Math.abs);P.addTo(s._distance,k)}this.axisIntent&&this.axisIntent(e);const[o,a]=s._movement,[f,u]=i.threshold,{_step:l,values:h}=s;if(i.hasCustomTransform?(l[0]===!1&&(l[0]=Math.abs(o)>=f&&h[0]),l[1]===!1&&(l[1]=Math.abs(a)>=u&&h[1])):(l[0]===!1&&(l[0]=Math.abs(o)>=f&&Math.sign(o)*f),l[1]===!1&&(l[1]=Math.abs(a)>=u&&Math.sign(a)*u)),s.intentional=l[0]!==!1||l[1]!==!1,!s.intentional)return;const d=[0,0];if(i.hasCustomTransform){const[k,C]=h;d[0]=l[0]!==!1?k-l[0]:0,d[1]=l[1]!==!1?C-l[1]:0}else d[0]=l[0]!==!1?o-l[0]:0,d[1]=l[1]!==!1?a-l[1]:0;this.restrictToAxis&&!s._blocked&&this.restrictToAxis(d);const m=s.offset,v=s._active&&!s._blocked||s.active;v&&(s.first=s._active&&!s.active,s.last=!s._active&&s.active,s.active=n[this.ingKey]=s._active,e&&(s.first&&("bounds"in i&&(s._bounds=Lt(i.bounds,s)),this.setup&&this.setup()),s.movement=d,this.computeOffset()));const[g,b]=s.offset,[[p,w],[y,A]]=s._bounds;s.overflow=[g<p?-1:g>w?1:0,b<y?-1:b>A?1:0],s._movementBound[0]=s.overflow[0]?s._movementBound[0]===!1?s._movement[0]:s._movementBound[0]:!1,s._movementBound[1]=s.overflow[1]?s._movementBound[1]===!1?s._movement[1]:s._movementBound[1]:!1;const x=s._active?i.rubberband||[0,0]:[0,0];if(s.offset=wn(s._bounds,s.offset,x),s.delta=P.sub(s.offset,m),this.computeMovement(),v&&(!s.last||r>Ln)){s.delta=P.sub(s.offset,m);const k=s.delta.map(Math.abs);P.addTo(s.distance,k),s.direction=s.delta.map(Math.sign),s._direction=s._delta.map(Math.sign),!s.first&&r>0&&(s.velocity=[k[0]/r,k[1]/r],s.timeDelta=r)}}emit(){const e=this.state,s=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const n=this.handler(I(I(I({},s),e),{},{[this.aliasKey]:e.values}));n!==void 0&&(e.memo=n)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Fn([t,e],s){const i=Math.abs(t),n=Math.abs(e);if(i>n&&i>s)return"x";if(n>i&&n>s)return"y"}class Ks extends zs{constructor(...e){super(...e),T(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=P.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=P.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const s=this.state,i=this.config;if(!s.axis&&e){const n=typeof i.axisThreshold=="object"?i.axisThreshold[$s(e)]:i.axisThreshold;s.axis=Fn(s._movement,n)}s._blocked=(i.lockDirection||!!i.axis)&&!s.axis||!!i.axis&&i.axis!==s.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const jn=t=>t,ns=.15,Qs={enabled(t=!0){return t},eventOptions(t,e,s){return I(I({},s.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[ns,ns];case!1:return[0,0];default:return P.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return P.toVector(t)},transform(t,e,s){const i=t||s.shared.transform;return this.hasCustomTransform=!!i,i||jn},threshold(t){return P.toVector(t,0)}},Un=0,nt=I(I({},Qs),{},{axis(t,e,{axis:s}){if(this.lockDirection=s==="lock",!this.lockDirection)return s},axisThreshold(t=Un){return t},bounds(t={}){if(typeof t=="function")return r=>nt.bounds(t(r));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:s=1/0,top:i=-1/0,bottom:n=1/0}=t;return[[e,s],[i,n]]}}),rs={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class Nn extends Ks{constructor(...e){super(...e),T(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const s=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),n={left:s.left-i.left+e.offset[0],right:s.right-i.right+e.offset[0],top:s.top-i.top+e.offset[1],bottom:s.bottom-i.bottom+e.offset[1]};e._bounds=nt.bounds(n)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const s=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(s.pointerButtons)?!s.pointerButtons.includes(e.buttons):s.pointerButtons!==-1&&s.pointerButtons!==e.buttons))return;const n=this.ctrl.setEventIds(e);s.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(n&&n.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=Jt(e),i._pointerActive=!0,this.computeValues(ts(e)),this.computeInitial(),s.preventScrollAxis&&$s(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):s.delay>0?(this.setupDelayTrigger(e),s.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const s=this.state;s._active=!0,s._preventScroll=!0,s._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const s=this.state,i=this.config;if(!s._pointerActive)return;const n=Jt(e);if(s._pointerId!==void 0&&n!==s._pointerId)return;const r=ts(e);if(document.pointerLockElement===e.target?s._delta=[e.movementX,e.movementY]:(s._delta=P.sub(r,s._values),this.computeValues(r)),P.addTo(s._movement,s._delta),this.compute(e),s._delayed&&s.intentional){this.timeoutStore.remove("dragDelay"),s.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!s._preventScroll)if(s.axis)if(s.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){s._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const s=this.state,i=this.config;if(!s._active||!s._pointerActive)return;const n=Jt(e);if(s._pointerId!==void 0&&n!==s._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[r,o]=s._distance;if(s.tap=r<=i.tapsThreshold&&o<=i.tapsThreshold,s.tap&&i.filterTaps)s._force=!0;else{const[a,f]=s._delta,[u,l]=s._movement,[h,d]=i.swipe.velocity,[m,v]=i.swipe.distance,g=i.swipe.duration;if(s.elapsedTime<g){const b=Math.abs(a/s.timeDelta),p=Math.abs(f/s.timeDelta);b>h&&Math.abs(u)>m&&(s.swipe[0]=Math.sign(a)),p>d&&Math.abs(l)>v&&(s.swipe[1]=Math.sign(f))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const s=this.config,i=s.device;s.pointerLock&&e.currentTarget.requestPointerLock(),s.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,$n(e);const s=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",s),this.eventStore.add(this.sharedConfig.window,"touch","cancel",s),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const s=rs[e.key];if(s){const i=this.state,n=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=s(this.config.keyboardDisplacement,n),i._keyboardActive=!0,P.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in rs&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const s=this.config.device;e(s,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(s,"change",this.pointerMove.bind(this)),e(s,"end",this.pointerUp.bind(this)),e(s,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function $n(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const Pt=typeof window<"u"&&window.document&&window.document.createElement;function Gs(){return Pt&&"ontouchstart"in window}function Bn(){return Gs()||Pt&&window.navigator.maxTouchPoints>1}function qn(){return Pt&&"onpointerdown"in window}function zn(){return Pt&&"exitPointerLock"in window.document}function Kn(){try{return"constructor"in GestureEvent}catch{return!1}}const M={isBrowser:Pt,gesture:Kn(),touch:Gs(),touchscreen:Bn(),pointer:qn(),pointerLock:zn()},Qn=250,Gn=180,Hn=.5,Yn=50,Wn=250,Xn=10,os={mouse:0,touch:0,pen:8},Zn=I(I({},nt),{},{device(t,e,{pointer:{touch:s=!1,lock:i=!1,mouse:n=!1}={}}){return this.pointerLock=i&&M.pointerLock,M.touch&&s?"touch":this.pointerLock?"mouse":M.pointer&&!n?"pointer":M.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:s}){if(this.preventScrollDelay=typeof s=="number"?s:s||s===void 0&&t?Qn:void 0,!(!M.touchscreen||s===!1))return t||(s!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:s=!0,buttons:i=1,keys:n=!0}={}}){return this.pointerButtons=i,this.keys=n,!this.pointerLock&&this.device==="pointer"&&s},threshold(t,e,{filterTaps:s=!1,tapsThreshold:i=3,axis:n=void 0}){const r=P.toVector(t,s?i:n?1:0);return this.filterTaps=s,this.tapsThreshold=i,r},swipe({velocity:t=Hn,distance:e=Yn,duration:s=Wn}={}){return{velocity:this.transform(P.toVector(t)),distance:this.transform(P.toVector(e)),duration:s}},delay(t=0){switch(t){case!0:return Gn;case!1:return 0;default:return t}},axisThreshold(t){return t?I(I({},os),t):os},keyboardDisplacement(t=Xn){return t}});function Hs(t){const[e,s]=t.overflow,[i,n]=t._delta,[r,o]=t._direction;(e<0&&i>0&&r<0||e>0&&i<0&&r>0)&&(t._movement[0]=t._movementBound[0]),(s<0&&n>0&&o<0||s>0&&n<0&&o>0)&&(t._movement[1]=t._movementBound[1])}const Jn=30,tr=100;class er extends zs{constructor(...e){super(...e),T(this,"ingKey","pinching"),T(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:s,lastOffset:i}=this.state;e==="wheel"?this.state.offset=P.add(s,i):this.state.offset=[(1+s[0])*i[0],s[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:s}=this.state;this.state.movement=[e[0]/s[0],e[1]-s[1]]}axisIntent(){const e=this.state,[s,i]=e._movement;if(!e.axis){const n=Math.abs(s)*Jn-Math.abs(i);n<0?e.axis="angle":n>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const s=this.state,i=this.ctrl.touchIds;if(s._active&&s._touchIds.every(r=>i.has(r))||i.size<2)return;this.start(e),s._touchIds=Array.from(i).slice(0,2);const n=Je(e,s._touchIds);n&&this.pinchStart(e,n)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const s=this.state,i=s._pointerEvents,n=this.ctrl.pointerIds;if(s._active&&Array.from(i.keys()).every(o=>n.has(o))||(i.size<2&&i.set(e.pointerId,e),s._pointerEvents.size<2))return;this.start(e);const r=le(...Array.from(i.values()));r&&this.pinchStart(e,r)}pinchStart(e,s){const i=this.state;i.origin=s.origin,this.computeValues([s.distance,s.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const s=Je(e,this.state._touchIds);s&&this.pinchMove(e,s)}pointerMove(e){const s=this.state._pointerEvents;if(s.has(e.pointerId)&&s.set(e.pointerId,e),!this.state._active)return;const i=le(...Array.from(s.values()));i&&this.pinchMove(e,i)}pinchMove(e,s){const i=this.state,n=i._values[1],r=s.angle-n;let o=0;Math.abs(r)>270&&(o+=Math.sign(r)),this.computeValues([s.distance,s.angle-360*o]),i.origin=s.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(s=>!this.ctrl.touchIds.has(s))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const s=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}s._pointerEvents.has(e.pointerId)&&s._pointerEvents.delete(e.pointerId),s._active&&s._pointerEvents.size<2&&(s._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const s=this.state;s._active||(this.start(e),this.computeValues([e.scale,e.rotation]),s.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const s=this.state;this.computeValues([e.scale,e.rotation]),s.origin=[e.clientX,e.clientY];const i=s._movement;s._movement=[e.scale-1,e.rotation],s._delta=P.sub(s._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const s=this.config.modifierKey;s&&(Array.isArray(s)?!s.find(i=>e[i]):!e[s])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-qs(e)[1]/tr*i.offset[0],0],P.addTo(i._movement,i._delta),Hs(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const s=this.config.device;s&&(e(s,"start",this[s+"Start"].bind(this)),e(s,"change",this[s+"Move"].bind(this)),e(s,"end",this[s+"End"].bind(this)),e(s,"cancel",this[s+"End"].bind(this)),e("lostPointerCapture","",this[s+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const sr=I(I({},Qs),{},{device(t,e,{shared:s,pointer:{touch:i=!1}={}}){if(s.target&&!M.touch&&M.gesture)return"gesture";if(M.touch&&i)return"touch";if(M.touchscreen){if(M.pointer)return"pointer";if(M.touch)return"touch"}},bounds(t,e,{scaleBounds:s={},angleBounds:i={}}){const n=o=>{const a=is(Lt(s,o),{min:-1/0,max:1/0});return[a.min,a.max]},r=o=>{const a=is(Lt(i,o),{min:-1/0,max:1/0});return[a.min,a.max]};return typeof s!="function"&&typeof i!="function"?[n(),r()]:o=>[n(o),r(o)]},threshold(t,e,s){return this.lockDirection=s.axis==="lock",P.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});I(I({},nt),{},{mouseOnly:(t=!0)=>t});class ir extends Ks{constructor(...e){super(...e),T(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const s=this.state;s._delta=qs(e),P.addTo(s._movement,s._delta),Hs(s),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const nr=nt;I(I({},nt),{},{mouseOnly:(t=!0)=>t});const Ys=new Map,fe=new Map;function Pe(t){Ys.set(t.key,t.engine),fe.set(t.key,t.resolver)}const rr={key:"drag",engine:Nn,resolver:Zn},or={key:"pinch",engine:er,resolver:sr},ar={key:"wheel",engine:ir,resolver:nr};function ur(t,e){if(t==null)return{};var s={},i=Object.keys(t),n,r;for(r=0;r<i.length;r++)n=i[r],!(e.indexOf(n)>=0)&&(s[n]=t[n]);return s}function cr(t,e){if(t==null)return{};var s=ur(t,e),i,n;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)i=r[n],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(s[i]=t[i])}return s}const lr={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=M.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},fr=["target","eventOptions","window","enabled","transform"];function Ot(t={},e){const s={};for(const[i,n]of Object.entries(e))switch(typeof n){case"function":s[i]=n.call(s,t[i],i,t);break;case"object":s[i]=Ot(t[i],n);break;case"boolean":n&&(s[i]=t[i]);break}return s}function hr(t,e,s={}){const i=t,{target:n,eventOptions:r,window:o,enabled:a,transform:f}=i,u=cr(i,fr);if(s.shared=Ot({target:n,eventOptions:r,window:o,enabled:a,transform:f},lr),e){const l=fe.get(e);s[e]=Ot(I({shared:s.shared},u),l)}else for(const l in u){const h=fe.get(l);h&&(s[l]=Ot(I({shared:s.shared},u[l]),h))}return s}class Ws{constructor(e,s){T(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=s}add(e,s,i,n,r){const o=this._listeners,a=kn(s,i),f=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=I(I({},f),r);e.addEventListener(a,n,u);const l=()=>{e.removeEventListener(a,n,u),o.delete(l)};return o.add(l),l}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class dr{constructor(){T(this,"_timeouts",new Map)}add(e,s,i=140,...n){this.remove(e),this._timeouts.set(e,window.setTimeout(s,i,...n))}remove(e){const s=this._timeouts.get(e);s&&window.clearTimeout(s)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class pr{constructor(e){T(this,"gestures",new Set),T(this,"_targetEventStore",new Ws(this)),T(this,"gestureEventStores",{}),T(this,"gestureTimeoutStores",{}),T(this,"handlers",{}),T(this,"config",{}),T(this,"pointerIds",new Set),T(this,"touchIds",new Set),T(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),mr(this,e)}setEventIds(e){if(Kt(e))return this.touchIds=new Set(Rn(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,s){this.handlers=e,this.nativeHandlers=s}applyConfig(e,s){this.config=hr(e,s,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const s=this.config.shared,i={};let n;if(!(s.target&&(n=s.target(),!n))){if(s.enabled){for(const o of this.gestures){const a=this.config[o],f=as(i,a.eventOptions,!!n);if(a.enabled){const u=Ys.get(o);new u(this,e,o).bind(f)}}const r=as(i,s.eventOptions,!!n);for(const o in this.nativeHandlers)r(o,"",a=>this.nativeHandlers[o](I(I({},this.state.shared),{},{event:a,args:e})),void 0,!0)}for(const r in i)i[r]=Mn(...i[r]);if(!n)return i;for(const r in i){const{device:o,capture:a,passive:f}=Tn(r);this._targetEventStore.add(n,o,"",i[r],{capture:a,passive:f})}}}}function J(t,e){t.gestures.add(e),t.gestureEventStores[e]=new Ws(t,e),t.gestureTimeoutStores[e]=new dr}function mr(t,e){e.drag&&J(t,"drag"),e.wheel&&J(t,"wheel"),e.scroll&&J(t,"scroll"),e.move&&J(t,"move"),e.pinch&&J(t,"pinch"),e.hover&&J(t,"hover")}const as=(t,e,s)=>(i,n,r,o={},a=!1)=>{var f,u;const l=(f=o.capture)!==null&&f!==void 0?f:e.capture,h=(u=o.passive)!==null&&u!==void 0?u:e.passive;let d=a?i:Pn(i,n,l);s&&h&&(d+="Passive"),t[d]=t[d]||[],t[d].push(r)};function xe(t,e={},s,i){const n=Qt.useMemo(()=>new pr(t),[]);if(n.applyHandlers(t,i),n.applyConfig(e,s),Qt.useEffect(n.effect.bind(n)),Qt.useEffect(()=>n.clean.bind(n),[]),e.target===void 0)return n.bind.bind(n)}function br(t,e){return Pe(rr),xe({drag:t},e||{},"drag")}function wr(t,e){return Pe(or),xe({pinch:t},e||{},"pinch")}function Sr(t,e){return Pe(ar),xe({wheel:t},e||{},"wheel")}export{br as a,wr as b,Sr as c,_r as d,yr as u};
